/*!
 * wald
 * Copyright(c) 2019 Katja Lutz
 * MIT Licensed
 * https://opensource.org/licenses/MIT
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.wald=e():t.wald=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(8),o=n(3);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(9);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(10),o=n(11),i=n(12);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){"use strict";n.r(e);var r,o,i=n(0),u=n.n(i),c=n(1),a=n.n(c),f=n(2),l=n.n(f),y=function(){function t(){u()(this,t)}return a()(t,[{key:"create",value:function(t){var e=t.blueprint,n=(t.creator,t.create);return e.create(n)}}]),t}(),s=function(){function t(e){var n=e.entityCreator;u()(this,t),l()(this,"entityCreator",void 0),this.entityCreator=n}return a()(t,[{key:"create",value:function(t){return this.entityCreator.create(t)}}]),t}(),p=function(){function t(e){var n=e.entityCreator,r=void 0===n?new y:n;u()(this,t),l()(this,"_entityCreator",void 0),this._entityCreator=r}return a()(t,[{key:"getEntityCreator",value:function(){return this._entityCreator}},{key:"setEntityCreator",value:function(t){this._entityCreator=t}},{key:"get",value:function(t){var e=t.blueprint,n=t.options,r=void 0===n?{}:n;return this._entityCreator.create({blueprint:e,creator:r,create:{ioc:this}})}}]),t}();o=new(function(){function t(){u()(this,t),l()(this,"idx",0)}return a()(t,[{key:"generate",value:function(t){return""!=t.id?t.id:this.idx++}}]),t}()),r=o;var d=function(t){var e=t.id,n=void 0===e?"":e,o=t.create,i=t.meta,u={id:n,create:o,meta:void 0===i?{}:i};return u.id=function(t){return r.generate(t)}(u),u},b=n(4),v=n.n(b),h=n(5),g=n.n(h),m=n(3),_=n.n(m),S=n(6),x=n.n(S),w=function(){function t(){u()(this,t),l()(this,"_entities",{})}return a()(t,[{key:"getEntity",value:function(t){var e=t.entityId;return this._entities[e]}},{key:"setEntity",value:function(t){var e=t.entity,n=t.entityId;this._entities[n]=e}},{key:"unsetEntity",value:function(t){delete this._entities[t]}}]),t}(),j=function(t){function e(t){var n;return u()(this,e),n=v()(this,g()(e).call(this,t)),l()(_()(n),"_entityStorage",void 0),n._entityStorage=t.entityStorage||new w,n}return x()(e,t),a()(e,[{key:"create",value:function(t){var e=this,n=t.blueprint,r=t.creator.multitonId,o=n.meta.multiton&&!0!==t.creator.noMultiton;if(o&&null==r)throw"Ioc.get multiton requires multitonId in options";var i=r+"-"+n.id;if(o){var u=this._entityStorage.getEntity({entityId:i,blueprint:n});if(void 0!==u)return u;t.create.clearMultiton=function(){e._entityStorage.unsetEntity(i)}}var c=this.entityCreator.create(t);return o&&this._entityStorage.setEntity({entityId:i,entity:c,blueprint:n}),c}}]),e}(s),C=function(t){function e(t){var n;return u()(this,e),n=v()(this,g()(e).call(this,t)),l()(_()(n),"_entityStorage",void 0),n._entityStorage=t.entityStorage||new w,n}return x()(e,t),a()(e,[{key:"create",value:function(t){var e=this,n=t.blueprint,r=n.meta.singleton&&!0!==t.creator.noSingleton;if(r){var o=this._entityStorage.getEntity({blueprint:n,entityId:n.id});if(void 0!==o)return o;t.create.clearSingleton=function(){e._entityStorage.unsetEntity(n.id)}}var i=this.entityCreator.create(t);return r&&this._entityStorage.setEntity({blueprint:n,entityId:n.id,entity:i}),i}}]),e}(s),E=n(7),O=n.n(E),I=function(t,e){for(var n=[],r=[],o=0,i=Object.entries(e);o<i.length;o++){var u=O()(i[o],2),c=u[0],a=u[1];n.push(a),r.push(c)}return t.all(n).then(function(t){for(var e={},n=t.length,o=0;o<n;o++)e[r[o]]=t[o];return e})};n.d(e,"Ioc",function(){return p}),n.d(e,"IocInterface",function(){}),n.d(e,"createBlueprint",function(){return d}),n.d(e,"EntityCreator",function(){return y}),n.d(e,"EntityCreatorInterface",function(){}),n.d(e,"AbstractEntityCreatorDecorator",function(){return s}),n.d(e,"MultitonEntityCreatorDecorator",function(){return j}),n.d(e,"SingletonEntityCreatorDecorator",function(){return C}),n.d(e,"promiseAllObject",function(){return I})}])});
//# sourceMappingURL=main.js.map